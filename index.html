1 of 1,993
(no subject)
Inbox

Ramshad PNR
11:37‚ÄØPM (21 minutes ago)
https://github.com/pnrramshad/tharavad.git

Ramshad PNR <pnrramshad@gmail.com>
11:57‚ÄØPM (1 minute ago)
to me

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Room Expense Tracker</title>
<style>
body {
font-family: "Poppins", sans-serif;
background: linear-gradient(to bottom right, #e3f2fd, #bbdefb);
margin: 0;
padding: 30px;
}
.container {
max-width: 750px;
background: #fff;
margin: auto;
border-radius: 12px;
padding: 25px;
box-shadow: 0 0 20px rgba(0,0,0,0.15);
}
h2, h3 {
text-align: center;
color: #333;
}
label {
font-weight: 600;
}
input, select, button {
padding: 6px;
margin: 4px;
border-radius: 6px;
border: 1px solid #ccc;
font-size: 15px;
}
button {
cursor: pointer;
background-color: #28a745;
color: #fff;
border: none;
}
button:hover {
background-color: #218838;
}
table {
width: 100%;
border-collapse: collapse;
margin: 10px 0;
}
th, td {
border: 1px solid #ddd;
padding: 8px;
text-align: center;
}
th {
background-color: #007bff;
color: white;
}
tr:hover {
background-color: #f8f9fa;
}
tfoot td {
font-weight: bold;
background: #e8f5e9;
}
.remove-btn {
background-color: #dc3545;
color: white;
border: none;
border-radius: 5px;
padding: 4px 8px;
cursor: pointer;
}
.remove-btn:hover {
background-color: #c82333;
}
</style>
</head>
<body>
<div class="container">
<h2>üè† Room Expense Tracker</h2>
<label>Total Room Rent (AED):</label>
<input type="number" id="rent" placeholder="Enter total rent">

<h3>üßæ Expenses</h3>
<table id="expenseTable">
<thead>
<tr><th>Person</th><th>Amount (AED)</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>
<button onclick="addExpenseRow()">‚ûï Add Row</button>
<button onclick="calculate()">üí∞ Calculate</button>

<h3>üìä Payment Summary</h3>
<table id="resultTable">
<thead>
<tr>
<th>Person</th>
<th>Total Paid</th>
<th>Expense Share</th>
<th>Rent Share</th>
<th>Amount to Pay</th>
</tr>
</thead>
<tbody></tbody>
<tfoot></tfoot>
</table>
</div>

<script>
const people = ["RAMSHAD", "ASHIR", "ZAKKI", "ASEEF", "KUTTAPI"];

// Add row
function addExpenseRow(person = "", amount = "") {
const tbody = document.querySelector("#expenseTable tbody");
const row = document.createElement("tr");
row.innerHTML = `
<td>
<select class="person-select">
${people.map(p => `<option value="${p}" ${p===person?"selected":""}>${p}</option>`).join('')}
</select>
</td>
<td><input type="number" class="amount" value="${amount}" placeholder="0"></td>
<td><button class="remove-btn" onclick="this.closest('tr').remove(); calculate();">‚ùå</button></td>
`;
tbody.appendChild(row);
}

// Calculate totals
function calculate() {
const rent = parseFloat(document.getElementById('rent').value);
if (!rent) return;

const totals = {};
people.forEach(p => totals[p] = 0);

document.querySelectorAll("#expenseTable tbody tr").forEach(row => {
const person = row.querySelector(".person-select").value;
const amount = parseFloat(row.querySelector(".amount").value) || 0;
if (amount > 0) totals[person] += amount;
});

const totalExpenses = Object.values(totals).reduce((a,b)=>a+b,0);
const expenseShare = totalExpenses / people.length;
const rentShare = rent / people.length;

const resultTable = document.getElementById("resultTable");
const tbody = resultTable.querySelector("tbody");
const tfoot = resultTable.querySelector("tfoot");
tbody.innerHTML = "";
tfoot.innerHTML = ""; // ‚úÖ remove old total row

people.forEach(p => {
const amountToPay = (rentShare + expenseShare - totals[p]).toFixed(2);
tbody.innerHTML += `
<tr>
<td>${p}</td>
<td>${totals[p].toFixed(2)}</td>
<td>${expenseShare.toFixed(2)}</td>
<td>${rentShare.toFixed(2)}</td>
<td style="font-weight:bold;color:${amountToPay>0?'#d9534f':'#28a745'};">
${amountToPay}
</td>
</tr>`;
});

// ‚úÖ single total summary row
tfoot.innerHTML = `
<tr>
<td colspan="2">Total Expenses</td>
<td colspan="3">${totalExpenses.toFixed(2)} AED</td>
</tr>
`;

saveData();
}

// Save to localStorage
function saveData() {
const rent = document.getElementById('rent').value;
const rows = Array.from(document.querySelectorAll("#expenseTable tbody tr")).map(r => ({
person: r.querySelector(".person-select").value,
amount: r.querySelector(".amount").value
}));
localStorage.setItem("roomExpenseData", JSON.stringify({ rent, rows }));
}

// Load data
function loadData() {
const data = JSON.parse(localStorage.getItem("roomExpenseData") || "{}");
if (data.rent) document.getElementById('rent').value = data.rent;
const tbody = document.querySelector("#expenseTable tbody");
tbody.innerHTML = "";
if (data.rows && data.rows.length) {
data.rows.forEach(d => addExpenseRow(d.person, d.amount));
} else {
people.forEach(() => addExpenseRow());
}
calculate();
}

document.addEventListener("input", e => {
if (e.target.classList.contains("amount") || e.target.id === "rent") calculate();
});

window.addEventListener("DOMContentLoaded", loadData);
window.addEventListener("beforeunload", saveData);
</script>
</body>
</html>
