1 of 672
(no subject)
Inbox

Ramshad PNR <pnrramshad@gmail.com>
12:11‚ÄØAM (19 hours ago)
to me

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Room Expense Tracker</title>
<style>
:root {
--bg: #ffffff;
--text: #222;
--card: #fff;
--table-border: #ddd;
--accent: #007bff;
--highlight: #28a745;
--remove: #dc3545;
}
body.dark {
--bg: #121212;
--text: #e0e0e0;
--card: #1f1f1f;
--table-border: #333;
--accent: #2196f3;
--highlight: #4caf50;
--remove: #e74c3c;
}
body {
font-family: "Poppins", sans-serif;
background: var(--bg);
color: var(--text);
margin: 0;
padding: 30px;
transition: background 0.3s, color 0.3s;
}
.container {
max-width: 750px;
background: var(--card);
margin: auto;
border-radius: 12px;
padding: 25px;
box-shadow: 0 0 20px rgba(0,0,0,0.15);
transition: background 0.3s;
}
h2, h3 { text-align: center; color: var(--text); }
input, select, button {
padding: 6px;
margin: 4px;
border-radius: 6px;
border: 1px solid var(--table-border);
font-size: 15px;
background: var(--card);
color: var(--text);
}
button {
cursor: pointer;
background-color: var(--highlight);
color: #fff;
border: none;
}
button:hover { opacity: 0.9; }
table {
width: 100%;
border-collapse: collapse;
margin: 10px 0;
}
th, td {
border: 1px solid var(--table-border);
padding: 8px;
text-align: center;
}
th {
background-color: var(--accent);
color: #fff;
}
tr:hover { background-color: rgba(0,0,0,0.05); }
tfoot td { font-weight: bold; background: rgba(40,167,69,0.1); }
.remove-btn {
background-color: var(--remove);
color: white;
border: none;
border-radius: 5px;
padding: 4px 8px;
cursor: pointer;
}
.remove-btn:hover { opacity: 0.9; }
.action-bar {
text-align: center;
margin-top: 15px;
}
.action-bar button {
margin: 5px;
}
</style>
</head>
<body>
<div class="container">
<h2>üè† Room Expense Tracker</h2>
<label>Total Room Rent (AED):</label>
<input type="number" id="rent" placeholder="Enter total rent">

<h3>üßæ Expenses</h3>
<table id="expenseTable">
<thead>
<tr><th>Person</th><th>Amount (AED)</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>

<div class="action-bar">
<button onclick="addExpenseRow()">‚ûï Add Row</button>
<button onclick="calculate()">üí∞ Calculate</button>
<button onclick="resetAll()">üîÑ Reset All</button>
<button onclick="downloadPDF()">üìÑ Download PDF</button>
<button onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
</div>

<h3>üìä Payment Summary</h3>
<table id="resultTable">
<thead>
<tr>
<th>Person</th>
<th>Total Paid</th>
<th>Expense Share</th>
<th>Rent Share</th>
<th>Amount to Pay</th>
</tr>
</thead>
<tbody></tbody>
<tfoot></tfoot>
</table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const people = ["RAMSHAD", "ASHIR", "ZAKKI", "ASEEF", "KUTTAPI"];

function addExpenseRow(person = "", amount = "") {
const tbody = document.querySelector("#expenseTable tbody");
const row = document.createElement("tr");
row.innerHTML = `
<td>
<select class="person-select">
${people.map(p => `<option value="${p}" ${p===person?"selected":""}>${p}</option>`).join('')}
</select>
</td>
<td><input type="number" class="amount" value="${amount}" placeholder="0"></td>
<td><button class="remove-btn" onclick="this.closest('tr').remove(); calculate();">‚ùå</button></td>
`;
tbody.appendChild(row);
}

function calculate() {
const rent = parseFloat(document.getElementById('rent').value);
if (!rent) return;
const totals = {};
people.forEach(p => totals[p] = 0);
document.querySelectorAll("#expenseTable tbody tr").forEach(row => {
const person = row.querySelector(".person-select").value;
const amount = parseFloat(row.querySelector(".amount").value) || 0;
if (amount > 0) totals[person] += amount;
});
const totalExpenses = Object.values(totals).reduce((a,b)=>a+b,0);
const expenseShare = totalExpenses / people.length;
const rentShare = rent / people.length;

const tbody = document.querySelector("#resultTable tbody");
const tfoot = document.querySelector("#resultTable tfoot");
tbody.innerHTML = "";
tfoot.innerHTML = "";

people.forEach(p => {
const amountToPay = (rentShare + expenseShare - totals[p]).toFixed(2);
tbody.innerHTML += `
<tr>
<td>${p}</td>
<td>${totals[p].toFixed(2)}</td>
<td>${expenseShare.toFixed(2)}</td>
<td>${rentShare.toFixed(2)}</td>
<td style="font-weight:bold;color:${amountToPay>0?'#d9534f':'#28a745'};">
${amountToPay}
</td>
</tr>`;
});
tfoot.innerHTML = `
<tr>
<td colspan="2">Total Expenses</td>
<td colspan="3">${totalExpenses.toFixed(2)} AED</td>
</tr>
`;
saveData();
}

function saveData() {
const rent = document.getElementById('rent').value;
const rows = Array.from(document.querySelectorAll("#expenseTable tbody tr")).map(r => ({
person: r.querySelector(".person-select").value,
amount: r.querySelector(".amount").value
}));
localStorage.setItem("roomExpenseData", JSON.stringify({ rent, rows, darkMode: document.body.classList.contains("dark") }));
}

function loadData() {
const data = JSON.parse(localStorage.getItem("roomExpenseData") || "{}");
if (data.rent) document.getElementById('rent').value = data.rent;
document.querySelector("#expenseTable tbody").innerHTML = "";
if (data.rows && data.rows.length) {
data.rows.forEach(d => addExpenseRow(d.person, d.amount));
} else {
people.forEach(() => addExpenseRow());
}
if (data.darkMode) document.body.classList.add("dark");
calculate();
}

function resetAll() {
if (!confirm("Are you sure you want to clear all data?")) return;
localStorage.removeItem("roomExpenseData");
document.getElementById("rent").value = "";
document.querySelector("#expenseTable tbody").innerHTML = "";
document.querySelector("#resultTable tbody").innerHTML = "";
document.querySelector("#resultTable tfoot").innerHTML = "";
people.forEach(() => addExpenseRow());
}

function toggleDarkMode() {
document.body.classList.toggle("dark");
saveData();
}

async function downloadPDF() {
const { jsPDF } = window.jspdf;
const doc = new jsPDF();
doc.text("üè† Room Expense Tracker Summary", 10, 10);
let y = 20;
const rent = document.getElementById('rent').value;
doc.text(`Total Rent: ${rent} AED`, 10, y);
y += 10;
doc.text("Name | Paid | Expense Share | Rent Share | To Pay", 10, y);
y += 6;
document.querySelectorAll("#resultTable tbody tr").forEach(row => {
const cols = Array.from(row.children).map(td => td.textContent.trim());
doc.text(cols.join(" | "), 10, y);
y += 6;
});
doc.save("Room_Expense_Tracker.pdf");
}

document.addEventListener("input", e => {
if (e.target.classList.contains("amount") || e.target.id === "rent") calculate();
});
window.addEventListener("DOMContentLoaded", loadData);
window.addEventListener("beforeunload", saveData);
</script>
</body>
</html>